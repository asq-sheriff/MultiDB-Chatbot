# =======================================
# .env.example - Configuration Template
# =======================================
# Copy this file to .env and update the values as needed

# =======================================
# Core Database Configuration
# =======================================

# -------------------------------
# Redis Configuration
# -------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# -------------------------------
# PostgreSQL Configuration
# -------------------------------
ENABLE_POSTGRESQL=true
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=chatbot_app
POSTGRES_USER=chatbot_user
POSTGRES_PASSWORD=your_postgres_password

# Python 3.13.3 Compatibility
SQLALCHEMY_WARN_20=0
SQLALCHEMY_SILENCE_UBER_WARNING=1

# -------------------------------
# ScyllaDB Configuration
# -------------------------------
SCYLLA_HOSTS=127.0.0.1
SCYLLA_PORT=9042
SCYLLA_KEYSPACE=chatbot_ks

# -------------------------------
# MongoDB Atlas Local Configuration
# -------------------------------
ENABLE_MONGODB=true
MONGO_HOST=localhost
MONGO_PORT=27017
MONGO_USER=root
MONGO_PASSWORD=your_mongo_password
MONGO_DB=chatbot_app

# Atlas Local URI with authentication and direct connection
MONGO_URI=mongodb://root:your_mongo_password@localhost:27017/chatbot_app?authSource=admin&directConnection=true

# MongoDB Connection Pool Settings
MONGO_MAX_POOL_SIZE=20
MONGO_MIN_POOL_SIZE=5
MONGO_SERVER_SELECTION_TIMEOUT=5000
MONGO_CONNECT_TIMEOUT_MS=5000
MONGO_SOCKET_TIMEOUT_MS=20000

# =======================================
# Vector Search Configuration
# =======================================

# Vector dimensions for sentence-transformers/all-mpnet-base-v2
MONGO_EMBEDDING_DIM=768
MONGO_SIMILARITY_METRIC=cosine

# Vector search index names
MONGO_VECTOR_INDEX_NAME=vector_idx_embeddings_embedding
MONGO_KNOWLEDGE_VECTOR_INDEX_NAME=vector_idx_knowledge_vectors_embedding

# Atlas Local Search Settings
ENABLE_ATLAS_SEARCH=true
ATLAS_CLUSTER_NAME=mongodb-atlas-local
ATLAS_CANDIDATES_MULTIPLIER=12
ATLAS_MAX_CANDIDATES=2000

# Search Fallback Configuration
ENABLE_EXACT_SEARCH_FALLBACK=true
ENABLE_SEMANTIC_SEARCH_FALLBACK=true
MIN_EXACT_RESULTS=1
MIN_SEMANTIC_SCORE=0.25
MAX_FALLBACK_ATTEMPTS=2

# =======================================
# AI Services Configuration
# =======================================

# Enable Real AI Services (set to 0 for mock services)
USE_REAL_EMBEDDINGS=1
USE_REAL_GENERATION=1

# -------------------------------
# Embedding Service Configuration
# -------------------------------
# Model: sentence-transformers/all-mpnet-base-v2
EMBEDDING_MODEL_NAME=sentence-transformers/all-mpnet-base-v2
EMBEDDING_BATCH_SIZE=20
EMBEDDING_MAX_LENGTH=2048
EMBEDDING_NORMALIZE=true
EMBEDDING_USE_FP16=true
EMBEDDING_DEVICE=mps
EMBEDDING_ENABLE_MPS=true
EMBEDDING_CACHE_MB=2048
EMBEDDING_QUERY_TIMEOUT=12.0

# -------------------------------
# Generation Service Configuration
# -------------------------------
# Model: Qwen/Qwen3-1.7B
GENERATION_MODEL_NAME=Qwen/Qwen3-1.7B
GENERATION_DEVICE=mps
GENERATION_ENABLE_MPS=true
GENERATION_USE_FP16=true
GENERATION_USE_CACHE=true
GENERATION_MAX_TOKENS=100
GENERATION_TIMEOUT=60.0
GENERATION_TEMPERATURE=0.7
GENERATION_TOP_P=0.9

# =======================================
# RAG Pipeline Configuration
# =======================================

# RAG Performance Settings
RAG_QUERY_TIMEOUT=2.5
RAG_MAX_CONTEXT_CHARS=300
RAG_TOP_K=7
RAG_MAX_SNIPPETS=2
RAG_DIVERSITY_THRESHOLD=0.80
RAG_SYNTHETIC_QUERY_EMBEDDINGS=0
RAG_ENABLED=true
ROUTER_DEFAULT_MODE=auto

# Hybrid Search Configuration
ENABLE_HYBRID_SEARCH=true
HYBRID_VECTOR_WEIGHT=0.8
HYBRID_TEXT_WEIGHT=0.2

# -------------------------------
# Chatbot Service Configuration
# -------------------------------
RESPONSE_STRATEGY=rag_enhanced
FALLBACK_TO_TEMPLATE=true
CHATBOT_GENERATION_MAX_TOKENS=100
CHATBOT_GENERATION_TEMPERATURE=0.7

# =======================================
# Document Seeding Configuration
# =======================================

# Core Seeding Settings
SEED_DOCS_PATH=./data/docs
SEED_MAX_FAQ=200
SEED_CHUNK_CHARS=1500
SEED_CHUNK_OVERLAP=180
SEED_BATCH_SIZE=16
SEED_DRY_RUN=0
SEED_CREATE_ATLAS_INDEXES=1

# Document Processing Features
ENABLE_ADVANCED_DOC_PROCESSOR=1
SEED_ENABLE_PDF=1
SEED_ENABLE_DOCX=1
SEED_ENABLE_CSV=1
SEED_MAX_FILE_SIZE_MB=75

# Performance Optimization
SEED_MAX_WORKERS=4
SEED_MEMORY_THRESHOLD=85.0
SEED_MIN_BATCH_SIZE=4
SEED_MAX_BATCH_SIZE=32

# =======================================
# Application Settings
# =======================================

# Basic Application Configuration
LOG_LEVEL=INFO
API_RATE_LIMIT=200
SECRET_KEY=your-secret-key-here
ENVIRONMENT=development

# Performance Monitoring
ENABLE_PERFORMANCE_TRACKING=1
ENABLE_TELEMETRY=1
ENABLE_MEMORY_MONITORING=1
MEMORY_CLEANUP_THRESHOLD=0.80

# Health Monitoring
ENABLE_HEALTH_MONITORING=true
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=15

# Service Warmup
ENABLE_WARMUP=1
WARMUP_TIMEOUT=120

# Development Settings
AUTO_SEED_ON_STARTUP=0